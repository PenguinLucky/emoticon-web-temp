<!DOCTYPE html>
<html lang="ja">
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">

        <title>だんだん重くなるサイト</title>
        <link rel="favicon icon" href="../assets/img/favicon.png">
        <meta charset=utf-8>

        <meta property="og:url" content="https://emoticon-bot.tk/heavy-page" />
        <meta property="og:type" content="article" />
        <meta property="og:title" content="顔文字で返してくるうざいBot　だんだん重くなるサイト" />
        <meta property="og:description" content="開始ボタンを押すと徐々に重くなります。" />
        <meta property="og:site_name" content="だんだん重くなるサイト" />
        <meta property="og:image" content="https://emoticon-bot.tk/assets/img/favicon.png" />

        <style>
            body{ background-color: #36393e; color: #FFFFFF; word-wrap: break-word; }
            .btn { display: inline-block; padding: 0.3em 1em; text-decoration: none; color: #67c5ff; border: solid 2px #67c5ff; border-radius: 3px; transition: .4s; text-align: center; width: 80%; }
            .btn:hover { background: #67c5ff; color: white; cursor : pointer; }
            .color { width: 300px; height: 100px; background-color: #ffffff; border-radius: 3px; color: #FFF; }
        </style>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-color/2.1.2/jquery.color.js"></script>
        <script>
            jQuery(function() {

                function sleep(msec) { return new Promise(function(resolve) { setTimeout(function() {resolve()}, msec); }) };

                $(document).ready(function(){

                    $(function(){

                        setInterval(function(){
                            var color_check = $('.color').css('background-color');
                            console.log(color_check);

                            if ( color_check == "rgb(255, 255, 255)" ) { $('.color').animate( { 'background-color': '#ff0000' }, 300 ); };
                            if ( color_check == "rgb(255, 0, 0)" ) { $('.color').animate( { 'background-color': '#0000ff' }, 300 ); };
                            if ( color_check == "rgb(0, 0, 255)" ) { $('.color').animate( { 'background-color': '#ff0000' }, 300 ); };
                        },1000);

                    });

                });

                let number = 0;
                let number_temp = 0;
                let number_plus_1 = 1;

                $('.start').click(async function() {
                    $(".start").hide();
                    $(".stop").show();
                    var result = "";
                    while ( number < number_plus_1 ) {
                        number++;
                        number_plus_1++;
                        number_temp = number;
                        result = result + "A";
                        $(".now").html(result);
                        $(".result").html("Aを "+number_temp+"個 入力しました。");
                        if ( (number % 200) == 0 ){ await sleep(1); }
                    }
                })

                $('.stop').click(function() {
                    number = number_plus_1 + 100;
                    $(".result").html("Aを "+number_temp+"個 入力しました。");
                    $(".stop").hide();
                })

            })

        </script>

    </head>
    <body>
        <a class="btn start" >重くする</a>
        <a class="btn stop" style="display: none;" >止める</a>
        <p class="result" ></p>
        <p class="color" ></a>
        <p class="now" ></p>
    </body>
</html>